<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data> 

        <!-- Receipt dialog Form  -->
        <record id="view_vendor_receipt_dialog_form" model="ir.ui.view">
            <field name="name">account.voucher.receipt.dialog.receipt.inherit.form</field>
            <field name="model">account.voucher</field>
            <field name="inherit_id" ref="account_voucher.view_vendor_receipt_dialog_form"/>
            <field name="arch" type="xml">
                <field name="amount" position="attributes">
                    <attribute name="readonly">context.get('from_settlement',False)</attribute>
                </field>
            </field>
        </record>

        <!-- Customer Receipt Form  -->
<!--         <record id="view_vendor_receipt_form" model="ir.ui.view">
            <field name="name">account.voucher.form.receipts.pay.inherit</field>
            <field name="model">account.voucher</field>
            <field name="inherit_id" ref="account_voucher.view_vendor_receipt_form"/>
            <field name="arch" type="xml">
            </field>
        </record> -->

        <!-- Supplier Receipt Form  -->
        <record id="view_vendor_payment_form" model="ir.ui.view">
            <field name="name">account.voucher.form.receipts.pay.inherit</field>
            <field name="model">account.voucher</field>
            <field name="inherit_id" ref="account_voucher.view_vendor_payment_form"/>
            <field name="arch" type="xml">

                <notebook>
                <!-- <page string="Payment Information" position="after"> -->
                    <!-- Deductions Made serian retenciones aplicadas -->
                    <page string="Tax Journal Items" states="posted">
                        <!-- <field name="tax_move_line_ids" context="{'tree_view_ref':'account_tax_settlement.view_account_move_line_tree'}"> -->
                        <field name="tax_move_line_ids">
                            <tree>
                                <field name="date"/>
                                <field name="name"/>
                                <field name="ref"/>
                                <field name="account_id"/>
                                <field name="debit" sum="Total Debit"/>
                                <field name="credit" sum="Total Credit"/>
                                <!-- <field name="date_maturity"/> -->
                                <field name="analytic_account_id" groups="analytic.group_analytic_accounting"/>
                                <field name="tax_code_id"/>
                                <field name="tax_amount" sum="Total Tax"/>
                                <!-- <field name="reconcile_ref"/> -->
                                <field name="tax_settlement_move_id"/>
                                <field name="tax_settlement_residual" invisible="1"/>
                                <field name="state" invisible="1"/>
                                <button name="make_tax_settlement" icon="gtk-go-forward" string="Settle" help="Make a move to settle current tax line" attrs="{'invisible':[('tax_settlement_move_id', '!=', False)]}" type="object"/>
                                <button name="pay_tax_settlement" icon="terp-dolar" string="Pay" attrs="{'invisible':[('tax_settlement_residual', '&lt;=', 0.0)]}" type="object"/>

                                <!-- <button name="make_settlement_and_pay_tax" string="Pay" attrs="{'invisible':['|', ('tax_amount', '&lt;=', 0.0), ('reconcile_ref', '!=', False)]}" type="object"/> -->
                            </tree>
                        </field>
                    </page>
                <!-- </page> -->
                </notebook>
            </field>
        </record>
          
    </data>
</openerp>
